
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Flask-Classful &#8212; Flask Classful 0.15.0-dev0 documentation</title>
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.15.0-dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
 

<link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css"
      type="text/css" rel="stylesheet"/>

  </head>
  <body>


<div class=indexwrapper>
    
    
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">Flask Classful 0.15.0-dev0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-flask_classful">
<span id="flask-classful"></span><h1>Flask-Classful<a class="headerlink" href="#module-flask_classful" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal"><span class="pre">Flask-Classful</span></code> is an extension that adds class-based views to Flask.
But why?</p>
<p>I ❤ Flask. Like a lot. But sometimes projects get a little big
and I need some way of managing and organizing all the different
pieces. I know what you’re saying: “But what about Blueprints?”</p>
<p>You’re right. Blueprints are pretty awesome. But I found that they
aren’t always enough to encapsulate a specific context the way I
need. What I wanted, no what I <em>needed</em> was to be able to group
my views into relevant classes each with their own context and
behavior. It’s also made testing really nifty too.</p>
<p>“OK, I see your point. But can’t I just use the base classes in
<code class="docutils literal"><span class="pre">flask.views</span></code> to do that?”</p>
<p>Well, yes and no. While <code class="docutils literal"><span class="pre">flask.views.MethodView</span></code> does
provide some of the functionality of <code class="docutils literal"><span class="pre">flask_classful.FlaskView</span></code>,
it doesn’t quite complete the picture by supporting methods that
aren’t part of the typical CRUD operations for a given resource, or
make it easy for me to override the route rules for particular views.
And while <code class="docutils literal"><span class="pre">flask.views.View</span></code> does add some context, it requires
a class for each view instead of letting me group very similar
views for the same resource into a single class.</p>
<p>“But my projects aren’t that big. Can <code class="docutils literal"><span class="pre">Flask-Classful</span></code> do
anything else for me besides making a big project easier to manage?”</p>
<p>Why yes. It does help a bit with some other things.</p>
<p>For example, <code class="docutils literal"><span class="pre">Flask-Classful</span></code> will automatically generate routes based on the methods
in your views, and makes it super simple to override those routes
using Flask’s familiar decorator syntax.</p>
<div class="section" id="about-flask-classful-vs-flask-classy-and-how-to-migrate">
<h2>About <code class="docutils literal"><span class="pre">Flask-Classful</span></code> vs <code class="docutils literal"><span class="pre">Flask-Classy</span></code> and how to migrate<a class="headerlink" href="#about-flask-classful-vs-flask-classy-and-how-to-migrate" title="Permalink to this headline">¶</a></h2>
<p>This is a fork of the original <code class="docutils literal"><span class="pre">Flask-Classy</span></code> for continued development
since the original project has ceased updates. For more information,
see: <a class="reference external" href="https://github.com/apiguy/flask-classy/issues/80">https://github.com/apiguy/flask-classy/issues/80</a></p>
<p>To switch from <code class="docutils literal"><span class="pre">Flask-Classy</span></code> to <code class="docutils literal"><span class="pre">Flask-Classful</span></code>, you just need to update
the module import, as the APIs are the same for both:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">recommended</span>
<span class="kn">from</span> <span class="nn">flask.ext.flask_classy</span> <span class="o">=&gt;</span> <span class="kn">from</span> <span class="nn">flask_classful</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask.ext.flask_classy</span> <span class="o">=&gt;</span> <span class="kn">from</span> <span class="nn">flask.ext.flask_classful</span>
</pre></div>
</div>
<p>Alternatively:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_classy</span> <span class="o">=&gt;</span> <span class="kn">from</span> <span class="nn">flask_classful</span>
</pre></div>
</div>
<p>You can switch back to <code class="docutils literal"><span class="pre">flask_classy</span></code>, if you like, by doing the reverse.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Install the latest extension with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install flask-classful -U
</pre></div>
</div>
<p>Or install the bleeding edge development version with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install git+https://github.com/teracyhq/flask-classful.git@develop#egg=flask-classful
</pre></div>
</div>
</div>
<div class="section" id="let-s-see-how-it-works">
<h2>Let’s see how it works<a class="headerlink" href="#let-s-see-how-it-works" title="Permalink to this headline">¶</a></h2>
<p>If you’re like me, you probably get a better idea of how to use something
when you see it being used. Let’s go ahead and create a little app to
see how <code class="docutils literal"><span class="pre">Flask-Classful</span></code> works:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span>

<span class="c1"># we&#39;ll make a list to hold some quotes for our app</span>
<span class="n">quotes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;A noble spirit embiggens the smallest man! ~ Jebediah Springfield&quot;</span><span class="p">,</span>
    <span class="s2">&quot;If there is a way to do it better... find it. ~ Thomas Edison&quot;</span><span class="p">,</span>
    <span class="s2">&quot;No one knows what he can do till he tries. ~ Publilius Syrus&quot;</span>
<span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">QuotesView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">quotes</span><span class="p">)</span>

<span class="n">QuotesView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Run this app and open your web browser to: <a class="reference external" href="http://localhost:5000/quotes/">http://localhost:5000/quotes/</a></p>
<p>As you can see, it returns the list of quotes. But what if we just wanted
one quote? What would we do then?</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QuotesView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">quotes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">quotes</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Not Found&quot;</span><span class="p">,</span> <span class="mi">404</span>
</pre></div>
</div>
<p>Now direct your browser to: <a class="reference external" href="http://localhost:5000/quotes/1/">http://localhost:5000/quotes/1/</a> and you should
see the very poignant quote from the esteemed Mr. Edison.</p>
<p>That’s cool and all, but what if we just wanted a random quote? What then?
Let’s add a random view to our FlaskView:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="k">import</span> <span class="n">choice</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QuotesView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">random</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">choice</span><span class="p">(</span><span class="n">quotes</span><span class="p">)</span>
</pre></div>
</div>
<p>And point your browser to: <a class="reference external" href="http://localhost:5000/quotes/random/">http://localhost:5000/quotes/random/</a> and see
that a random quote is returned each time. Voilà!</p>
<p>So by now you must be keenly aware of the fact that you have not defined a
single route, but yet routing is obviously taking place. “Is this voodoo?”
you ask?</p>
<p>Not at all. <code class="docutils literal"><span class="pre">Flask-Classful</span></code> will automatically create routes for any method
in a FlaskView that doesn’t begin with an underscore character.
You can still define your own routes of course, and we’ll look at that next.</p>
</div>
<div class="section" id="using-custom-routes">
<h2>Using custom routes<a class="headerlink" href="#using-custom-routes" title="Permalink to this headline">¶</a></h2>
<p>So let’s pretend that <cite>/quotes/random/</cite> is just too unsightly and we must
fix it to be something more spectacular forthwith. In a moment of blind
inspiration we decide that getting a random quote is on par with receiving
a rasher of your favorite porcine delicacy. The new URL should be <cite>/quotes/word_bacon/</cite>
so that everyone knows what a treat they are in for.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span><span class="p">,</span> <span class="n">route</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QuotesView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/word_bacon/&#39;</span><span class="p">)</span> <span class="c1">#&lt;--- Adding route</span>
    <span class="k">def</span> <span class="nf">random</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">choice</span><span class="p">(</span><span class="n">quotes</span><span class="p">)</span>
</pre></div>
</div>
<p>Load up <a class="reference external" href="http://localhost:5000/quotes/word_bacon/">http://localhost:5000/quotes/word_bacon/</a> in your browser and behold
your latest achievement.</p>
<p>The route decorator takes exactly the same parameters as Flask’s <cite>app.route</cite>
decorator, so you should feel right at home adding custom routes to any
views you create.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to use other decorators with your views, you’ll need to
make sure that the <code class="docutils literal"><span class="pre">&#64;route</span></code> decorators are first.</p>
</div>
<p>So far, all of our URLs have been prefixed by that <cite>/quotes</cite> bit and you
have probably deduced that it was derived from the name of your FlaskView
instance (minus the “View” suffix, of course.) “That’s all well and good,”
you’re saying, “but how do I change that? What if I want my views at the
root?” Well, person, I have an answer for you.</p>
<div class="section" id="flask-classful-s-way-of-talking-about-routes">
<h3><code class="docutils literal"><span class="pre">Flask-Classful</span></code>’s way of talking about “routes”<a class="headerlink" href="#flask-classful-s-way-of-talking-about-routes" title="Permalink to this headline">¶</a></h3>
<p>OK, so I don’t want to start inventing a new language (actually I’d love to
invent a new language, just not right now…) for talking about URLs, but
since <code class="docutils literal"><span class="pre">Flask-Classful</span></code> gives you a lot of flexibility in customizing your routes
we might as well make sure we’re talking about the same things when we talk
about what you can do.</p>
<p>What you see below is a route comprised of a route prefix, and a route base:</p>
<blockquote>
<div>/neat_prefix/great_base/</div></blockquote>
<p>The prefix <cite>/neat_prefix/</cite> is only included if you explicitly specify
a prefix for the FlaskView, otherwise no prefix will be applied.</p>
<p>The route base <cite>/great_base/</cite> will always exist, either because it was
inferred automatically from the name of the FlaskView class, or because you
specified a route base to use.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">Flask-Classful</span></code> favors putting trailing slashes at the end of routes without parameters.
You can override this behavior by specifying <cite>trailing_slash=False</cite> either
as an attribute of your <cite>FlaskView</cite> or in the <cite>register</cite> method.</p>
</div>
</div>
<div class="section" id="specifying-a-route-prefix">
<h3>Specifying a Route Prefix<a class="headerlink" href="#specifying-a-route-prefix" title="Permalink to this headline">¶</a></h3>
<p>A route prefix is a great way to define a common base to URLs. For example lets
say you had a bunch of views that were all part of your application’s API system.</p>
<p>You <em>could</em> write custom route bases for all of them, but if you want to use
<code class="docutils literal"><span class="pre">Flask-Classful</span></code>’s (admittedly amazing) automatic route generation stuff you’ll lose
the part where it infers the route base from the name of the class.</p>
<p>A better choice is to use a route prefix.</p>
<p>You can specify a route prefix either as an attribute of the <cite>FlaskView</cite>, or when you
register the <cite>FlaskView</cite> with the application.</p>
<div class="section" id="as-an-attribute">
<h4>As an attribute:<a class="headerlink" href="#as-an-attribute" title="Permalink to this headline">¶</a></h4>
<p>Using an attribute is a great way to define a default prefix, as you can always
override this value when you register the <cite>FlaskView</cite> with your app:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BurgundyView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">route_prefix</span> <span class="o">=</span> <span class="s1">&#39;/colors/&#39;</span>

    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="when-registering">
<h4>When registering:<a class="headerlink" href="#when-registering" title="Permalink to this headline">¶</a></h4>
<p>Alternatively (or additionally, if you like) you can specify a route prefix when
you register the route with your app:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">BurgundyView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">route_prefix</span><span class="o">=</span><span class="s1">&#39;/redish_colors/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And this will override any route prefixes set on the <cite>FlaskView</cite> class itself.</p>
</div>
</div>
<div class="section" id="customizing-the-route-base">
<h3>Customizing the Route Base<a class="headerlink" href="#customizing-the-route-base" title="Permalink to this headline">¶</a></h3>
<p>There are 2 ways to customize the base route of a <cite>FlaskView</cite>. (Well
technically there are 3 if you count changing the name of the class
but that’s hardly a reasonable way to go about it.)</p>
<div class="section" id="method-1">
<h4>Method 1:<a class="headerlink" href="#method-1" title="Permalink to this headline">¶</a></h4>
<p>The first method simply requires you to set a <cite>route_base</cite> attribute on
your <cite>FlaskView</cite>. Suppose we wanted to make our QuotesView handle the
root of the web application:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QuotesView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">route_base</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>

    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/word_bacon/&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">random</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="method-2">
<h4>Method 2:<a class="headerlink" href="#method-2" title="Permalink to this headline">¶</a></h4>
<p>The second method is perfect for when you’re using app factories, and
you need to be able to specify different base routes for different apps.
You can specify the route when you register the class with the Flask app
instance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QuotesView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">route_base</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The second method will always override the first, so you can use method
one, and override it with method two if needed. Sweet!</p>
</div>
</div>
<div class="section" id="a-few-words-on-register">
<h3>A few words on <code class="docutils literal"><span class="pre">register</span></code><a class="headerlink" href="#a-few-words-on-register" title="Permalink to this headline">¶</a></h3>
<p>As you’ve probably seen by now, the <code class="docutils literal"><span class="pre">register</span></code> method is integral to
<code class="docutils literal"><span class="pre">Flask-Classful</span></code>’s usage and is pretty frickin’ powerful. But, how does it
work under the hood?</p>
<p>Internally, <code class="docutils literal"><span class="pre">register</span></code> grabs all methods defined directly on the View Class
given to it, ignoring methods from any base classes. From there, we inspect
the names of the methods and the configuration attributes on the class and
construct a valid URL Rule. We then merely call Flask’s own <code class="docutils literal"><span class="pre">add_url_rule</span></code>
with the configuration we’ve gathered.</p>
<p>What does this mean for you? Well, it means you can pass any argument that
<code class="docutils literal"><span class="pre">add_url_rule</span></code> takes to <code class="docutils literal"><span class="pre">register</span></code> and it will be passed to every single
<code class="docutils literal"><span class="pre">add_url_rule</span></code> call we make when registering the class! Want all methods
on a View to redirect elsewhere? Try calling <code class="docutils literal"><span class="pre">register</span></code> like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">RedirectView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">redirect_to</span><span class="o">=</span><span class="s1">&#39;my/new/route&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information on what you can pass, see Werkzeug’s own documentation for
<a class="reference external" href="http://werkzeug.pocoo.org/docs/0.12/routing/#werkzeug.routing.Rule">werkzeug.routing.Rule</a>.</p>
</div>
<div class="section" id="using-multiple-routes-for-a-single-view">
<h3>Using multiple routes for a single view<a class="headerlink" href="#using-multiple-routes-for-a-single-view" title="Permalink to this headline">¶</a></h3>
<p>What happens when you need to apply more than one route to a specific view
(for what it’s worth, Flask core developer Armin Ronacher <a class="reference external" href="http://stackoverflow.com/a/7876088/105987">says doing that is
a bad idea</a>). But since you’re so
determined let’s see how to do that anyway.</p>
<p>So let’s say you add the following routes to one of your views:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QuotesView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">route_base</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/quote/&lt;id&gt;&#39;</span><span class="p">)</span>
    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/quote/show/&lt;id&gt;&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">show_quote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>That would end up generating the following 2 routes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/quote/&lt;id&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>QuotesView:show_quote_1</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/quote/show/&lt;id&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>QuotesView:show_quote_0</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
<p>“Oh weird! What’s with all the _0 and _1 stuff?” you ask in disgust. Well
first I want to know how you managed to pronounce _0. But really the reason
is that since there is more than one route, an index is added to prevent an
endpoint collision. This differs from the default behavior of <cite>Flask</cite>, which
allows you to create collisions.</p>
</div>
<div class="section" id="specify-your-own-damn-endpoint">
<h3>Specify your own damn endpoint<a class="headerlink" href="#specify-your-own-damn-endpoint" title="Permalink to this headline">¶</a></h3>
<p>So you don’t like the nifty indexing trick? Well fine then. I guess you can
go ahead and specify your own endpoint if you like but that’s only because I
like you.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QuotesView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">route_base</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/quote/&lt;id&gt;&#39;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;show_quote&#39;</span><span class="p">)</span>
    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/quote/show/&lt;id&gt;&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">show_quote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Will generate the following routes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/quote/&lt;id&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>show_quote</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/quote/show/&lt;id&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>QuotesView:show_quote_0</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="special-method-names">
<h2>Special method names<a class="headerlink" href="#special-method-names" title="Permalink to this headline">¶</a></h2>
<p>So I guess I have to break the narrative a bit here so I can take some
time to talk about <code class="docutils literal"><span class="pre">Flask-Classful</span></code>’s special method names.</p>
<p>Here’s the thing. <cite>FlaskView</cite> is smart. No, not solving differential
equations smart, but let’s just say it knows how to put the round peg
in the round hole. When you register a <cite>FlaskView</cite> with an app,
<cite>FlaskView</cite> will look for special methods in your class. Why? Because
I care. I know that sometimes you just want things to just <em>work</em> and
not have to think about it. Let’s look at <cite>FlaskView</cite>’s very special
method names:</p>
<dl class="docutils">
<dt><strong>index</strong></dt>
<dd><p class="first">Woah… you’ve seen this one before! Remember way back at the
beginning? Oh nevermind. So <em>index</em> is generally used for home pages
and lists of resources. The automatically generated route is:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>&lt;class name&gt;:index</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>get</strong></dt>
<dd><p class="first">Another old familiar friend, <cite>get</cite> is usually used to retrieve a
specific resource. The automatically generated route is:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/&lt;id&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>&lt;class name&gt;:get</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>post</strong></dt>
<dd><p class="first">This method is generally used for creating new instances of a resource
but can really be used to handle any posted data you want. The
automatically generated route is:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>&lt;class name&gt;:post</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>POST</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>put</strong></dt>
<dd><p class="first">For those of us using REST this one is really helpful. It’s generally
used to update a specific resource. The automatically generated route
is:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/&lt;id&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>&lt;class name&gt;:put</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>PUT</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>patch</strong></dt>
<dd><p class="first">Similar to <cite>put</cite>, <cite>patch</cite> is used for updating a resource. Unlike <cite>put</cite>
however you only send the parts of the resource you want changed,
instead of doing a complete replacement of the resource. The automatically
generated route is:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/&lt;id&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>&lt;class name&gt;:patch</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>PATCH</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>delete</strong></dt>
<dd><p class="first">More RESTfulness. It’s the most self explanatory of all the RESTful
methods, and it’s commonly used to destroy a specific resource. The
automatically generated route is:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/&lt;id&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>&lt;class name&gt;:delete</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>DELETE</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="url-for-art-thou-romeo">
<h2>url_for art thou, Romeo?<a class="headerlink" href="#url-for-art-thou-romeo" title="Permalink to this headline">¶</a></h2>
<p>Sorry that’s a terrible name for a section header, but naming things is what
am the least skilled at, so please bear with me.</p>
<p>Once you’ve got your <cite>FlaskView</cite> registered, you’ll probably want to be able
to get the URLs for it in your templates and redirects and whatnot. <cite>Flask</cite>
ships with the awesome <cite>url_for</cite> function that does an excellent job of
turning a function name into a URL that maps to it. You can use <cite>url_for</cite>
with <code class="docutils literal"><span class="pre">Flask-Classful</span></code> by using the format “&lt;Class name&gt;:&lt;method name&gt;”. Let’s
look at an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DuckyView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Duckies!&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Duck </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/do_duck_stuff&#39;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;do_duck_stuff&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Um... Quack?&quot;</span>
</pre></div>
</div>
<p>In this example, you can get a URL to the index method using:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;DuckyView:index&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And you can get a URL to the get method using:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;DuckyView:get&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Howard&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And for that view with the custom endpoint defined?:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;do_duck_stuff&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notice that the custom endpoint does not get prefixed with the class
name like the auto-generated endpoints. When you define a custom
endpoint, we hand that over to Flask in it’s original, unaltered form.</p>
</div>
</div>
<div class="section" id="your-own-methods-they-re-special-too">
<h2>Your own methods (they’re special too!)<a class="headerlink" href="#your-own-methods-they-re-special-too" title="Permalink to this headline">¶</a></h2>
<p>Let’s talk about how you can add your own methods (like we did with
<cite>random</cite> back in the day, remember? Good times.) If you add your own
methods, <cite>FlaskView</cite> will detect them during registration and register
routes for them, whether you’ve gone and defined your own, or you just
want to let <cite>FlaskView</cite> do its thing. By default, <cite>FlaskView</cite> will
create a route that is the same as the method name. So if you define a
view method in your <cite>FlaskView</cite> like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomeView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">route_base</span> <span class="o">=</span> <span class="s2">&quot;root&quot;</span>

    <span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Check out my view!&quot;</span>
</pre></div>
</div>
<p><cite>FlaskView</cite> will generate a route like this:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/root/my_view/</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>SomeView:my_view</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
<p>“That’s fine.” you say. “But what if I have a view method with some
parameters?” Well <cite>FlaskView</cite> will try to take care of that for you
too. If you were to define another view like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AnotherView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">route_base</span> <span class="o">=</span> <span class="s2">&quot;home&quot;</span>

    <span class="k">def</span> <span class="nf">this_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Args: </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,)</span>
</pre></div>
</div>
<p><cite>FlaskView</cite> would generate a route like this:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/home/this_view/&lt;arg1&gt;/&lt;arg2&gt;</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>AnotherView:this_view</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One important thing to note, is that <cite>FlaskView</cite> does not type your
parameters, so if you want or need them you’ll need to define the
route yourself using the <cite>&#64;route</cite> decorator.</p>
</div>
<p>Sometimes that you need to use <cite>my-view</cite> instead of default <cite>my_view</cite> generated route, you can
use <cite>method_dashified</cite> attribute when defining the view class or when registering the view with the
app. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomeView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">route_base</span> <span class="o">=</span> <span class="s2">&quot;root&quot;</span>
    <span class="n">method_dashified</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Check out my view!&quot;</span>
</pre></div>
</div>
<p><cite>FlaskView</cite> will generate a route like this:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/root/my-view/</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>SomeView:my_view</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET</td>
</tr>
</tbody>
</table>
<p>Out of the box, your custom methods will all be registed as only <code class="docutils literal"><span class="pre">GET</span></code> methods. This is
done because it is simply the default that Flask uses when registering routes without
any HTTP methods specified. If you want to change the default HTTP method your custom
methods respond to, simply define a class level attribute named <code class="docutils literal"><span class="pre">default_methods</span></code>
and make it a list of all HTTP methods you want your custom methods to respond to.</p>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DefaultMethodsView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">default_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Check out my view!&quot;</span>
</pre></div>
</div>
<p>This will register <code class="docutils literal"><span class="pre">my_view</span></code> as both a <code class="docutils literal"><span class="pre">GET</span></code> and a <code class="docutils literal"><span class="pre">POST</span></code> route. Creating the following
route:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>rule</strong></td>
<td>/root/my_view/</td>
</tr>
<tr class="row-even"><td><strong>endpoint</strong></td>
<td>SomeView:my_view</td>
</tr>
<tr class="row-odd"><td><strong>method</strong></td>
<td>GET, POST</td>
</tr>
</tbody>
</table>
<div class="section" id="hiding-your-own-methods-they-re-not-all-special">
<h3>Hiding your own methods (they’re not <em>all</em> special!)<a class="headerlink" href="#hiding-your-own-methods-they-re-not-all-special" title="Permalink to this headline">¶</a></h3>
<p>While automatically registering your own methods is awesome and usually
expected, sometimes you write view-level methods that shouldn’t be API routes.
Generally, these are private methods prefixed with an <cite>_</cite>. By default,
<code class="docutils literal"><span class="pre">Flask-Classful</span></code> will not register a route for any method beginning with an <cite>_</cite>.
However, sometimes you don’t have full API control or you are creating a publicly
accessible API that isn’t an API endpoint. For example, consider some kind of
setup method your class view has:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SetupView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># do some sort of crazy expensive calculation on demand here</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The intention is for the app to call this after registering the view when some
data that isn’t immediately available is ready. As such, this isn’t really a
private method, but it also isn’t an API endpoint. To prevent <code class="docutils literal"><span class="pre">Flask-Classful</span></code>
from registering this as an endpoint, add it to the <cite>excluded_methods</cite> class
property, like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SetupView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">excluded_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;setup&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># do some sort of crazy expensive calculation on demand here</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="decorating-tips">
<h2>Decorating Tips<a class="headerlink" href="#decorating-tips" title="Permalink to this headline">¶</a></h2>
<p>So if you’re like me (and who isn’t?), you think that <a href="#id2"><span class="problematic" id="id3">`</span></a>FlaskView`s are
frickin’ beautiful. But once you’ve moved in, it’s nice to add a little
personal touch, don’t you think?</p>
<p>Of course I’m talking about decorators. The <cite>Flask</cite> ecosystem is full of
excellent extensions that allow you to customize a view’s behavior
simply by adding a decorator, and you can use them with your
FlaskView’s too.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BetterButterView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>

    <span class="nd">@login_required</span>  <span class="c1"># Ain&#39;t it pretty?</span>
    <span class="k">def</span> <span class="nf">super_secret</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;It&#39;s a secret to everyone.&quot;</span>
</pre></div>
</div>
<p>But what about when you want to add a decorator to every method in your
<cite>FlaskView</cite>? All you need to do is add a <cite>decorators</cite> attribute to the
class definition with a list of decorators you want applied to every
method and <code class="docutils literal"><span class="pre">Flask-Classful</span></code> will take care of the rest:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">WhataGreatView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">decorators</span> <span class="o">=</span> <span class="p">[</span><span class="n">login_required</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">this_is_secret</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;If you see this, you&#39;re logged in.&quot;</span>

    <span class="k">def</span> <span class="nf">so_is_this</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Looking at me? I guess you&#39;re logged in.&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="before-and-after">
<h2>Before and After<a class="headerlink" href="#before-and-after" title="Permalink to this headline">¶</a></h2>
<p>Hey, remember that time when you made that big ol’ <cite>Flask</cite> app and then
had those <code class="docutils literal"><span class="pre">&#64;app.before_request</span></code> and <code class="docutils literal"><span class="pre">&#64;app.after_request</span></code>
decorated methods? Remember how you only wanted some of them to run for
certain views so you had all those <code class="docutils literal"><span class="pre">if</span> <span class="pre">view</span> <span class="pre">==</span> <span class="pre">the_one_I_care_about:</span></code>
statements and stuff?</p>
<p><strong>Yuck.</strong></p>
<p>I’ve been there too, and I think you might like how <code class="docutils literal"><span class="pre">Flask-Classful</span></code>
addresses this very touchy issue. <code class="docutils literal"><span class="pre">FlaskView</span></code> will look for wrapper
methods when your request is being processed so that you can create more
fine grained “before and after” processing methods.</p>
<div class="section" id="wrap-all-the-views-in-a-flaskview">
<h3>Wrap all the views in a FlaskView<a class="headerlink" href="#wrap-all-the-views-in-a-flaskview" title="Permalink to this headline">¶</a></h3>
<p>So there you are, eating a delicious Strawberry Frosted Pop Tart one
morning, thinking about the awesome <code class="docutils literal"><span class="pre">Flask-Classful</span></code> app you deployed the
night before during one of your late night hackathons and it hits you:</p>
<p><em>“Tracking! I need to track those widgets!”</em></p>
<p>No doubt it’s an inspired thought, but in this case it was a tragic
oversight. You realize now how lucky it was that you chose to use
<code class="docutils literal"><span class="pre">Flask-Classful</span></code> because adding tracking is going to be a snap:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span>
<span class="kn">from</span> <span class="nn">made_up_tracking</span> <span class="k">import</span> <span class="n">track_it</span>

<span class="k">class</span> <span class="nc">WidgetsView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">track_it</span><span class="p">(</span><span class="s2">&quot;something is happening to a widget&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="n">track_it</span><span class="p">(</span><span class="s2">&quot;something happened to a widget&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Whew. Crisis averted, am I right? So you go about your day and at lunch time
you hit your favorite Bacon Sandwich place and start daydreaming about your
life as a rockstar <code class="docutils literal"><span class="pre">Flask-Classful</span></code> consultant when suddenly:</p>
<p><em>“I really only care about when widgets are created and retrieved!”</em></p>
</div>
<div class="section" id="wrap-only-specific-views">
<h3>Wrap only specific views<a class="headerlink" href="#wrap-only-specific-views" title="Permalink to this headline">¶</a></h3>
<p>Yep, you’ve got a granularity problem. Not to worry though because
<code class="docutils literal"><span class="pre">Flask-Classful</span></code> is happy to let you know that it has <em>smart</em> wrapper methods
too. Let’s say for example you wanted to run something before the <code class="docutils literal"><span class="pre">index</span></code> view
runs? Just create a method called <code class="docutils literal"><span class="pre">before_index</span></code> and <code class="docutils literal"><span class="pre">Flask-Classful</span></code> will make
sure it gets run only before that view. (as you have guessed by now,
<code class="docutils literal"><span class="pre">after_index</span></code> will be run only after the index view).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span>
<span class="kn">from</span> <span class="nn">made_up_tracking</span> <span class="k">import</span> <span class="n">track_it</span>

<span class="k">class</span> <span class="nc">WidgetsView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>

    <span class="c1"># Will be run before the &#39;get&#39; view</span>
    <span class="k">def</span> <span class="nf">before_get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">track_it</span><span class="p">(</span><span class="s2">&quot;a widget is being accessed&quot;</span><span class="p">)</span>

    <span class="c1"># Will be run before the &#39;post&#39; view</span>
    <span class="k">def</span> <span class="nf">after_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="n">track_it</span><span class="p">(</span><span class="s2">&quot;a widget was created&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="the-view-wrappin-method-list">
<h3>The View Wrappin’ Method List<a class="headerlink" href="#the-view-wrappin-method-list" title="Permalink to this headline">¶</a></h3>
<p>Just to be certain, let’s go ahead and review the methods you can write to
wrap your views:</p>
<dl class="docutils">
<dt><strong>before_request(self, name, *args, **kwargs)</strong></dt>
<dd><p class="first">Will be called before any view in this <code class="docutils literal"><span class="pre">FlaskView</span></code> is called.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body">The name of the view that’s about to be called.</td>
</tr>
<tr class="field-even field"><th class="field-name">*args:</th><td class="field-body">Any arguments that will be passed to the view.</td>
</tr>
<tr class="field-odd field"><th class="field-name">**kwargs:</th><td class="field-body">Any keyword arguments that will be passed to the view.</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>before_&lt;view_method&gt;(self, *args, **kwargs)</strong></dt>
<dd><p class="first">Will be called before the view specified &lt;view_method&gt; is called.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">*args:</th><td class="field-body">Any arguments that will be passed to the view.</td>
</tr>
<tr class="field-even field"><th class="field-name">**kwargs:</th><td class="field-body">Any keyword arguments that will be passed to the view.</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>after_request(self, name, response)</strong></dt>
<dd><p class="first">Will be called after any view in this <code class="docutils literal"><span class="pre">FlaskView</span></code> is called. You must
return either the passed in response or a new response.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body">The name of the view that was called.</td>
</tr>
<tr class="field-even field"><th class="field-name">response:</th><td class="field-body">The response produced after calling the view.</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>after_&lt;view_method&gt;(self, response)</strong></dt>
<dd><p class="first">Will be called after the &lt;view_method&gt; is called. You must return either
the passed in response or a new response.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">response:</th><td class="field-body">The response produced after calling the view.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="order-of-wrapped-method-execution">
<h3>Order of Wrapped Method Execution<a class="headerlink" href="#order-of-wrapped-method-execution" title="Permalink to this headline">¶</a></h3>
<p>Wrapper methods are called in the same order every time. “How predictable.”
you’re thinking. (You’re starting to sound like my ex, sheesh.) I prefer the
term <em>reliable</em>.</p>
<ol class="arabic simple">
<li>Any method registered with <code class="docutils literal"><span class="pre">&#64;app.before_request</span></code></li>
<li>FlaskView’s <code class="docutils literal"><span class="pre">before_request</span></code> method</li>
<li>FlaskView’s <code class="docutils literal"><span class="pre">before_&lt;view_method&gt;</span></code> method</li>
<li>The actual view method</li>
<li>FlaskView’s <code class="docutils literal"><span class="pre">after_&lt;view_method&gt;</span></code> method</li>
<li>FlaskView’s <code class="docutils literal"><span class="pre">after_request</span></code> method</li>
<li>Any method registered with <code class="docutils literal"><span class="pre">&#64;app.after_request</span></code></li>
</ol>
</div>
</div>
<div class="section" id="subdomains-getting-advanced-n-stuff">
<h2>Subdomains (getting advanced ‘n stuff)<a class="headerlink" href="#subdomains-getting-advanced-n-stuff" title="Permalink to this headline">¶</a></h2>
<p>By now, you’ve built a few hundred <cite>Flask</cite> apps using <code class="docutils literal"><span class="pre">Flask-Classful</span></code>
and you probably think you’re an expert. But not until you’ve tried
the snazzy <cite>Subdomains</cite> feature my friend.</p>
<p><code class="docutils literal"><span class="pre">Flask-Classful</span></code> allows you to specify a subdomain to be used when
registering routes for your FlaskViews. While the usefulness of this
feature is probably apparent to many of you, let’s go ahead and take a
look at one of the many facilitative use cases.</p>
<p>Suppose you’ve got a sweet API you’re porting over from a legacy app
and in the migration you want to clean things up a bit and start using
a subdomain like <code class="docutils literal"><span class="pre">api.socool.biz</span></code> instead of the old way of accessing
it using <code class="docutils literal"><span class="pre">api</span></code> at the root of the path like <code class="docutils literal"><span class="pre">socool.biz/api</span></code>. The
only catch, of course, is that you have API clients still using that
old path based method. What is a hard working developer like you to do?</p>
<p>Thanks to <cite>Flask</cite> and <code class="docutils literal"><span class="pre">Flask-Classful</span></code> you have some options. There are two
easy ways you can choose from to tell <code class="docutils literal"><span class="pre">Flask-Classful</span></code> which subdomains your
<code class="docutils literal"><span class="pre">FlaskView</span></code> should respond to.</p>
<p>Let’s see both methods so you can choose which one works best for your
application.</p>
<div class="section" id="the-define-during-registration-method">
<h3>The Define-During-Registration Method<a class="headerlink" href="#the-define-during-registration-method" title="Permalink to this headline">¶</a></h3>
<p>Probably the most flexible method, you can define which subdomains you
want to support at the same time you’re registering your views:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># views.py</span>

<span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span>

<span class="k">class</span> <span class="nc">CoolApiView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;API stuff&quot;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># main.py</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">views</span> <span class="k">import</span> <span class="n">CoolApiView</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;socool.biz&#39;</span>

<span class="c1"># This one matches URLs like: http://socool.biz/api/...</span>
<span class="n">CoolApiView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">route_base</span><span class="o">=</span><span class="s1">&#39;/api/&#39;</span><span class="p">)</span>

<span class="c1"># This one matches URLs like: http://api.socool.biz/...</span>
<span class="n">CoolApiView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">route_base</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">subdomain</span><span class="o">=</span><span class="s1">&#39;api&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="the-explicit-define-in-the-flaskview-method">
<h3>The Explicit-Define-In-The-FlaskView Method<a class="headerlink" href="#the-explicit-define-in-the-flaskview-method" title="Permalink to this headline">¶</a></h3>
<p>Using this method, you can explicitly define a subdomain as an attribute of
the <code class="docutils literal"><span class="pre">FlaskView</span></code> subclass:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># views.py</span>

<span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span>

<span class="k">class</span> <span class="nc">CoolApiView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">subdomain</span> <span class="o">=</span> <span class="s2">&quot;api&quot;</span>

    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;API Stuff&quot;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># main.py</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">views</span> <span class="k">import</span> <span class="n">CoolApiView</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;socool.biz&#39;</span>

<span class="c1"># This one matches URLs like: http://socool.biz/api/...</span>
<span class="n">CoolApiView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">route_base</span><span class="o">=</span><span class="s1">&#39;/api/&#39;</span><span class="p">,</span> <span class="n">subdomain</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># This one matches URLs like: http://api.socool.biz/...</span>
<span class="n">CoolApiView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">route_base</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>As you can see here, specifying the subdomain to the register method will
override the explicit subdomain attribute set inside the class.</p>
</div>
</div>
<div class="section" id="adding-resource-representations-get-real-classy-and-put-on-a-top-hat">
<h2>Adding Resource Representations (Get real classy and put on a top hat)<a class="headerlink" href="#adding-resource-representations-get-real-classy-and-put-on-a-top-hat" title="Permalink to this headline">¶</a></h2>
<p>So, you want to use <code class="docutils literal"><span class="pre">Flask-Classful</span></code> to make a RESTful API. Not a problem, we got
you covered. Say you want your API to be able to respond to requests with JSON.
All you have to do is create a class that defines how to serialize and deserialize
the data, add it to the <cite>representations</cite> variable on your <cite>FlaskView</cite>.</p>
<p>Here’s the code for the JSON Response class:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># representations.py</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">make_response</span>

<span class="k">def</span> <span class="nf">output_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">content_type</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="n">dumped</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="n">content_type</span><span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="n">content_type</span><span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">dumped</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
<p>Then go ahead and add this new resource representation to your <cite>FlaskView</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># views.py</span>

<span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span>
<span class="kn">from</span> <span class="nn">.representations</span> <span class="k">import</span> <span class="n">output_json</span>

<span class="k">class</span> <span class="nc">CoolJSONView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">representations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;application/json&#39;</span><span class="p">:</span> <span class="n">output_json</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;This is JSON&#39;</span><span class="p">:</span> <span class="s1">&#39;How Cool is that&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">representations</span></code> attribute is a dictionary in which each key is a content type and the value
is a <code class="docutils literal"><span class="pre">flask.make_response</span></code> proxy function with the same signature.</p>
<p>By default, the <code class="docutils literal"><span class="pre">representations</span></code> class attribute is an empty dictionary.</p>
<p>When the <code class="docutils literal"><span class="pre">representations</span></code> dictionary is not empty and if the view function returns a
<code class="docutils literal"><span class="pre">flask.wrappers.ResponseBase</span></code> instance, it will be returned immediately to <code class="docutils literal"><span class="pre">Flask</span></code> to handle
the rest. Otherwise, <code class="docutils literal"><span class="pre">Flask-Classful</span></code> will try to find the best match between the accepted content
types and the keys in the <code class="docutils literal"><span class="pre">representations</span></code> dictionary, and call the associated output proxy
function to create a <code class="docutils literal"><span class="pre">flask.wrappers.ResponseBase</span></code> instance. If no matching output proxy function
is found when <code class="docutils literal"><span class="pre">Flask-Classful</span></code> looks for one, then the data the view returns
is passed straight to <code class="docutils literal"><span class="pre">Flask's</span></code> <code class="docutils literal"><span class="pre">make_response</span></code> and returned as is.</p>
<p>This is an example where the view function returns a <code class="docutils literal"><span class="pre">flask.wrappers.ResponseBase</span></code> instance,
skipping the <code class="docutils literal"><span class="pre">representations</span></code> system entirely:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># views.py</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">redirect</span>
<span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span>
<span class="kn">from</span> <span class="nn">.representations</span> <span class="k">import</span> <span class="n">output_json</span>

<span class="k">class</span> <span class="nc">CoolJSONView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">representations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;application/json&#39;</span><span class="p">:</span> <span class="n">output_json</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">redirect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">&quot;http://flask-classful.teracy.org&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To define a default representation that is used when no other matches are
found, you can add the <code class="docutils literal"><span class="pre">flask-classful/default</span></code> mimetype to your
representations dictionary, like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># views.py</span>

<span class="kn">from</span> <span class="nn">flask_classful</span> <span class="k">import</span> <span class="n">FlaskView</span>
<span class="kn">from</span> <span class="nn">.representations</span> <span class="k">import</span> <span class="n">output_default</span><span class="p">,</span> <span class="n">output_json</span>

<span class="k">class</span> <span class="nc">CoolDefaultView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">representations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;application/json&#39;</span><span class="p">:</span> <span class="n">output_json</span><span class="p">,</span>
                       <span class="s1">&#39;flask-classful/default&#39;</span><span class="p">:</span> <span class="n">output_default</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;defaults&#39;</span><span class="p">:</span> <span class="s1">&#39;are cool, yo&#39;</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">“Find the best match” means comparing the accepted mimetypes and their
q-factor weighting to the list of representation mimetypes. That is, Flask
Classful does no special heuristics in finding this best match. For more
information, see
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept">this MDN article on the Accept header</a>
or <a class="reference external" href="http://flask.pocoo.org/snippets/45/">this snippet</a> about Werkzeug’s <code class="docutils literal"><span class="pre">best_match</span></code> helper.</p>
</div>
</div>
<div class="section" id="type-hints-support-for-python-3">
<h2>Type Hints Support for Python 3<a class="headerlink" href="#type-hints-support-for-python-3" title="Permalink to this headline">¶</a></h2>
<p>With Python 3, you can use <a class="reference external" href="https://docs.python.org/3/library/typing.html">type hints</a> for a view
function’s arguments. By using these, you can have very simple, and convenient type input validation
and conversion for a view function. If a view function is called with parameters of the wrong type,
the view function will not be called and a <code class="docutils literal"><span class="pre">404</span></code> HTTP status code will be returned.</p>
<p>This is an example of type hinting support:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># python3 only</span>

<span class="k">class</span> <span class="nc">TypingView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Index&quot;</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/&lt;id&gt;&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Post&quot;</span>

    <span class="k">def</span> <span class="nf">patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Patch&quot;</span>

    <span class="k">def</span> <span class="nf">int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="n">UUID</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
<p>This is the current default <code class="docutils literal"><span class="pre">type_hints</span></code> class attribute of the <code class="docutils literal"><span class="pre">FlaskView</span></code> class:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># supported type hints used to determine url variable converters</span>
<span class="n">type_hints</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nb">str</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
    <span class="nb">int</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span>
    <span class="nb">float</span><span class="p">:</span> <span class="s1">&#39;float&#39;</span><span class="p">,</span>
    <span class="n">UUID</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can override as much as you wish for your application, see more at
<a class="reference external" href="http://flask.pocoo.org/docs/0.12/api/#url-route-registrations">URL Route Registrations</a> and
<a class="reference external" href="http://flask.pocoo.org/docs/0.12/api/#flask.Flask.url_map">flask.Flask.url_map</a></p>
<p>In the future, we can add a more sophisticated mechanism for type hinting and conversion.</p>
<div class="section" id="disabling-type-hints">
<h3>Disabling Type Hints<a class="headerlink" href="#disabling-type-hints" title="Permalink to this headline">¶</a></h3>
<p>Let’s say you’re using Python 3 with Type Hints, because types are awesome (just like you),
but you want to disable reading these hints and adding them into your URL Rules. First off,
I’m not really sure why you would ever want to do this, but I’m sure you have a great reason!</p>
<p>Luckily, Classful supports doing just that! Merely add a new class attribute named
<code class="docutils literal"><span class="pre">inspect_args</span></code> and set it’s value to <code class="docutils literal"><span class="pre">False</span></code>, like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NoInspectArgsView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="n">inspect_args</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>In the above example, even though we’re using a Type Hint to say that the <code class="docutils literal"><span class="pre">id</span></code> URL Argument
should be an <code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">Flask</span> <span class="pre">Classful</span></code> will ignore this information and continue to pass it to
you as a string. From there, I’m sure you want to coerce arguments in your own fancy way.</p>
</div>
</div>
<div class="section" id="providing-your-own-base-class">
<h2>Providing your OWN base class<a class="headerlink" href="#providing-your-own-base-class" title="Permalink to this headline">¶</a></h2>
<p>Just about every programmer who’s worked with a major library has discovered some odd issues
with it or has found something they disagree with in its implementation. Many times, the
easiest way to fix this (beyond contributing upstream!) is to define your own base class
that extends the problematic class in question and fixes your gripe. This is a wonderful
way to fix problems and really shows how excellent OOP can be, and, as such, is highly encouraged.</p>
<p><code class="docutils literal"><span class="pre">Flask-Classful</span></code> feels the same way, if you want to sub-class <code class="docutils literal"><span class="pre">FlaskView</span></code> to add whatever
functionality you want, you should do exactly that! However, you should know one thing
before you do this, and that is how <code class="docutils literal"><span class="pre">Flask-Classful</span></code> automatically discovers methods to register
as routes. Whenever <code class="docutils literal"><span class="pre">register</span></code> is called with a <code class="docutils literal"><span class="pre">FlaskView</span></code> subclass, the method inspects
both <code class="docutils literal"><span class="pre">FlaskView</span></code> and the subclass, grabbing the set of methods from both. It then takes
the set of methods defined on <code class="docutils literal"><span class="pre">FlaskView</span></code> and <strong>removes</strong> them from the set of methods
defined on the subclass. This then gives the set of methods that are unique to the subclass
and those methods are registered.</p>
<p>What does this mean to you? It means that all your nifty little helper methods on your base
class… will be registered as routes by default! This is certainly not what you want. The
astute reader will recognize that you can use the <code class="docutils literal"><span class="pre">excluded_methods</span></code> attribute to work around
this. While this will work, it poses some problems. It essentially forces you to maintain a list
of all methods on your base class that you want excluded. All in all, this creates a very
user-unfriendly process.</p>
<p>Now that I’ve dashed all of your hopes, how about I restore them? This is a problem
<code class="docutils literal"><span class="pre">Flask-Classful</span></code> has thought about and addressed, through the usage of the <code class="docutils literal"><span class="pre">base_class</span></code> kwarg on
the <code class="docutils literal"><span class="pre">register</span></code> method. Whenever you call <code class="docutils literal"><span class="pre">register</span></code> on a <code class="docutils literal"><span class="pre">FlaskView</span></code> subclass, you
can pass it the actual base class of the class you’re registering. When this is passed,
<code class="docutils literal"><span class="pre">Flask-Classful</span></code> will grab the set of methods from the new base class and will not register
any of them. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyBaseView</span><span class="p">(</span><span class="n">FlaskView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;foo&#39;</span>

<span class="k">class</span> <span class="nc">MyChildView</span><span class="p">(</span><span class="n">MyBaseView</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">MyChildView</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">base_class</span><span class="o">=</span><span class="n">MyBaseView</span><span class="p">)</span>
</pre></div>
</div>
<p>By passing <code class="docutils literal"><span class="pre">MyBaseView</span></code> as the <code class="docutils literal"><span class="pre">base_class</span></code> to the <code class="docutils literal"><span class="pre">register</span></code> call, we will now
properly ignore <code class="docutils literal"><span class="pre">foo</span></code> and it will not become a route!</p>
</div>
<div class="section" id="questions">
<h2>Questions?<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<p>Feel free to ping me on twitter &#64;teracyhq, or head on over to the
github repo at <a class="reference external" href="https://github.com/teracyhq/flask-classful">https://github.com/teracyhq/flask-classful</a> so you can join
the fun.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flask_classful.FlaskView">
<em class="property">class </em><code class="descclassname">flask_classful.</code><code class="descname">FlaskView</code><a class="headerlink" href="#flask_classful.FlaskView" title="Permalink to this definition">¶</a></dt>
<dd><p>Base view for any class based views implemented with Flask-Classful. Will
automatically configure routes when registered with a Flask app instance.</p>
<dl class="classmethod">
<dt id="flask_classful.FlaskView.build_route_name">
<em class="property">classmethod </em><code class="descname">build_route_name</code><span class="sig-paren">(</span><em>method_name</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_classful.FlaskView.build_route_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a unique route name based on the combination of the class
name with the method name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>method_name</strong> – the method name to use when building a route name</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="flask_classful.FlaskView.build_rule">
<em class="property">classmethod </em><code class="descname">build_rule</code><span class="sig-paren">(</span><em>rule</em>, <em>method=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_classful.FlaskView.build_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a routing rule based on either the class name (minus the
‘View’ suffix) or the defined <cite>route_base</cite> attribute of the class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rule</strong> – the path portion that should be appended to the
route base</li>
<li><strong>method</strong> – if a method’s arguments should be considered when
constructing the rule, provide a reference to the
method here. arguments named “self” will be ignored</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="flask_classful.FlaskView.get_route_base">
<em class="property">classmethod </em><code class="descname">get_route_base</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_classful.FlaskView.get_route_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the route base to use for the current class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="flask_classful.FlaskView.make_proxy_method">
<em class="property">classmethod </em><code class="descname">make_proxy_method</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_classful.FlaskView.make_proxy_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a proxy function that can be used by Flasks routing. The
proxy instantiates the FlaskView subclass and calls the appropriate
method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the name of the method to create a proxy for</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="flask_classful.FlaskView.parse_options">
<em class="property">classmethod </em><code class="descname">parse_options</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_classful.FlaskView.parse_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts subdomain and endpoint values from the options dict and returns
them along with a new dict without those values.</p>
</dd></dl>

<dl class="classmethod">
<dt id="flask_classful.FlaskView.register">
<em class="property">classmethod </em><code class="descname">register</code><span class="sig-paren">(</span><em>app</em>, <em>route_base=None</em>, <em>subdomain=None</em>, <em>route_prefix=None</em>, <em>trailing_slash=None</em>, <em>method_dashified=None</em>, <em>base_class=None</em>, <em>**rule_options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_classful.FlaskView.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a FlaskView class for use with a specific instance of a
Flask app. Any methods not prefixes with an underscore are candidates
to be routed and will have routes registered when this method is
called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> – an instance of a Flask application</li>
<li><strong>route_base</strong> – The base path to use for all routes registered for
this class. Overrides the route_base attribute if
it has been set.</li>
<li><strong>subdomain</strong> – A subdomain that this registration should use when
configuring routes.</li>
<li><strong>route_prefix</strong> – A prefix to be applied to all routes registered
for this class. Precedes route_base. Overrides
the class’ route_prefix if it has been set.</li>
<li><strong>trailing_slash</strong> – An option to put trailing slashes at the end of
routes without parameters.</li>
<li><strong>method_dashified</strong> – An option to dashify method name from
some_route to /some-route/ route instead of
default /some_route/</li>
<li><strong>base_class</strong> – Allow specifying an alternate base class for customization instead of the default FlaskView</li>
<li><strong>rule_options</strong> – The options are passed to 
<code class="xref py py-class docutils literal"><span class="pre">Rule</span></code> object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="flask_classful.route">
<code class="descclassname">flask_classful.</code><code class="descname">route</code><span class="sig-paren">(</span><em>rule</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_classful.route" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that is used to define custom routes for methods in
FlaskView subclasses. The format is exactly the same as Flask’s
<cite>&#64;app.route</cite> decorator.</p>
</dd></dl>

<hr class="docutils" />
<p>© Copyright 2013 by Freedom Dumlao, <a class="reference external" href="https://twitter.com/APIguy">Follow Me &#64;apiguy</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Flask-Classful</a><ul>
<li><a class="reference internal" href="#about-flask-classful-vs-flask-classy-and-how-to-migrate">About <code class="docutils literal"><span class="pre">Flask-Classful</span></code> vs <code class="docutils literal"><span class="pre">Flask-Classy</span></code> and how to migrate</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#let-s-see-how-it-works">Let’s see how it works</a></li>
<li><a class="reference internal" href="#using-custom-routes">Using custom routes</a><ul>
<li><a class="reference internal" href="#flask-classful-s-way-of-talking-about-routes"><code class="docutils literal"><span class="pre">Flask-Classful</span></code>’s way of talking about “routes”</a></li>
<li><a class="reference internal" href="#specifying-a-route-prefix">Specifying a Route Prefix</a><ul>
<li><a class="reference internal" href="#as-an-attribute">As an attribute:</a></li>
<li><a class="reference internal" href="#when-registering">When registering:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-route-base">Customizing the Route Base</a><ul>
<li><a class="reference internal" href="#method-1">Method 1:</a></li>
<li><a class="reference internal" href="#method-2">Method 2:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-few-words-on-register">A few words on <code class="docutils literal"><span class="pre">register</span></code></a></li>
<li><a class="reference internal" href="#using-multiple-routes-for-a-single-view">Using multiple routes for a single view</a></li>
<li><a class="reference internal" href="#specify-your-own-damn-endpoint">Specify your own damn endpoint</a></li>
</ul>
</li>
<li><a class="reference internal" href="#special-method-names">Special method names</a></li>
<li><a class="reference internal" href="#url-for-art-thou-romeo">url_for art thou, Romeo?</a></li>
<li><a class="reference internal" href="#your-own-methods-they-re-special-too">Your own methods (they’re special too!)</a><ul>
<li><a class="reference internal" href="#hiding-your-own-methods-they-re-not-all-special">Hiding your own methods (they’re not <em>all</em> special!)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#decorating-tips">Decorating Tips</a></li>
<li><a class="reference internal" href="#before-and-after">Before and After</a><ul>
<li><a class="reference internal" href="#wrap-all-the-views-in-a-flaskview">Wrap all the views in a FlaskView</a></li>
<li><a class="reference internal" href="#wrap-only-specific-views">Wrap only specific views</a></li>
<li><a class="reference internal" href="#the-view-wrappin-method-list">The View Wrappin’ Method List</a></li>
<li><a class="reference internal" href="#order-of-wrapped-method-execution">Order of Wrapped Method Execution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subdomains-getting-advanced-n-stuff">Subdomains (getting advanced ‘n stuff)</a><ul>
<li><a class="reference internal" href="#the-define-during-registration-method">The Define-During-Registration Method</a></li>
<li><a class="reference internal" href="#the-explicit-define-in-the-flaskview-method">The Explicit-Define-In-The-FlaskView Method</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-resource-representations-get-real-classy-and-put-on-a-top-hat">Adding Resource Representations (Get real classy and put on a top hat)</a></li>
<li><a class="reference internal" href="#type-hints-support-for-python-3">Type Hints Support for Python 3</a><ul>
<li><a class="reference internal" href="#disabling-type-hints">Disabling Type Hints</a></li>
</ul>
</li>
<li><a class="reference internal" href="#providing-your-own-base-class">Providing your OWN base class</a></li>
<li><a class="reference internal" href="#questions">Questions?</a></li>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<a href="http://github.com/teracyhq/flask-classful">
    <img style="position: fixed; top: 0; right: 0; border: 0;"
         src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
         alt="Fork me on GitHub"/></a>

    <div class="footer">
        &copy; Copyright 2013, Freedom Dumlao & 2016, Teracy, Inc.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
    
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42868657-8', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>